<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sunny's Space Adventure ☀️</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Fredoka', sans-serif;
      background: #000814;
      color: #fff;
      height: 100vh;
      overflow: hidden;
      transition: background 1s ease;
    }

    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      background: radial-gradient(2px 2px at 20% 30%, white, transparent),
                  radial-gradient(2px 2px at 60% 70%, white, transparent),
                  radial-gradient(1px 1px at 50% 50%, white, transparent),
                  radial-gradient(1px 1px at 80% 10%, white, transparent),
                  radial-gradient(2px 2px at 90% 60%, white, transparent);
      background-size: 200% 200%;
      animation: stars-move 8s ease-in-out infinite;
      opacity: 0.6;
    }

    @keyframes stars-move {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(-10px, -10px); }
    }

    .screen { display: none; opacity: 0; transition: opacity 0.6s ease; }
    .screen.active { display: block; opacity: 1; }

    .game-screen {
      position: relative;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 5;
    }

    .character { font-size: 10rem; animation: float 3s ease-in-out infinite; margin-bottom: 2rem; }
    @keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-30px);} }

    .story-box {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,215,0,0.3);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 2rem 3rem;
      max-width: 700px;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
    }

    .story-text { font-size: 1.4rem; font-weight: 600; line-height: 1.6; margin-bottom: 1.5rem; }

    .choices { display: flex; flex-wrap: wrap; justify-content: center; gap: 1.2rem; margin-top: 1rem; }
    .choice-btn {
      font-size: 1.2rem; font-weight: 600;
      padding: 1rem 2rem; border: none;
      border-radius: 20px; cursor: pointer;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; transition: 0.3s; box-shadow: 0 10px 20px rgba(102,126,234,0.3);
    }
    .choice-btn:hover { transform: scale(1.05); }
    .choice-btn.yellow { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .choice-btn.green { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }

    .title {
      font-size: 4rem;
      font-weight: 700;
      background: linear-gradient(45deg, #ffd700, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1rem;
      text-shadow: 0 0 30px rgba(255,215,0,0.5);
    }
    .subtitle { font-size: 1.5rem; color: #7fffd4; margin-bottom: 2rem; }

    .theme-option {
      background: rgba(255,255,255,0.1);
      border: 2px solid #fff;
      padding: 1rem 2rem;
      border-radius: 20px;
      cursor: pointer;
      transition: transform 0.3s, background 0.3s;
      font-size: 1.2rem;
    }
    .theme-option:hover { background: rgba(255,255,255,0.2); transform: scale(1.1); }

    /* Aurora theme */
    .theme-aurora { background: linear-gradient(180deg, #021b79 0%, #0575e6 100%); }
    /* Solar Storm */
    .theme-storm { background: radial-gradient(circle at top, #ff512f, #dd2476); }
    /* Classic */
    .theme-classic { background: #000814; }

    /* API Data */
    .data-box {
      background: rgba(0,0,0,0.7);
      padding: 2rem;
      border-radius: 20px;
      border: 2px solid #ffd700;
      max-width: 700px;
      font-size: 1.2rem;
      line-height: 1.5;
    }

    /* Resources box */
    .resources-box {
      background: rgba(255,255,255,0.1);
      padding: 2rem;
      border-radius: 20px;
      max-width: 800px;
      text-align: left;
      border: 2px solid #ffd700;
    }

    @media (max-width: 768px) {
      .character { font-size: 7rem; }
      .title { font-size: 2.5rem; }
      .story-text { font-size: 1.1rem; }
    }
  </style>
</head>
<body>
  <div class="stars"></div>

  <!-- Theme Selection -->
  <div class="screen active" id="themeSelect">
    <div class="game-screen">
      <h1 class="title">Sunny's Space Adventure ☀️</h1>
      <p class="subtitle">Choose Your Cosmic Theme</p>
      <div class="choices">
        <div class="theme-option" onclick="selectTheme('classic')">🌌 Classic Space</div>
        <div class="theme-option" onclick="selectTheme('aurora')">🌈 Aurora Glow</div>
        <div class="theme-option" onclick="selectTheme('storm')">⚡ Solar Storm</div>
      </div>
    </div>
  </div>

  <!-- Home -->
  <div class="screen" id="home">
    <div class="game-screen">
      <div class="character">☀️</div>
      <h1 class="title">SUNNY’S ADVENTURE</h1>
      <p class="subtitle">A Space Weather Story</p>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('scene1')">🚀 Start Journey</button>
      </div>
    </div>
  </div>

  <!-- Scene 1 -->
  <div class="screen" id="scene1">
    <div class="game-screen">
      <div class="character">💥</div>
      <div class="story-box">
        <p class="story-text">You are born as SUNNY, a Solar Flare from the Sun! What do you want to do?</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('scene2a')">🚀 Zoom to Earth!</button>
        <button class="choice-btn yellow" onclick="goTo('scene2b')">🛸 Explore Space First</button>
      </div>
    </div>
  </div>

  <!-- Scene 2a -->
  <div class="screen" id="scene2a">
    <div class="game-screen">
      <div class="character">⚡</div>
      <div class="story-box">
        <p class="story-text">WHOOSH! You reach Earth fast! Your power is strong. Where do you go?</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('scene3a')">🛰️ Hit Satellites</button>
        <button class="choice-btn green" onclick="goTo('scene3b')">🌍 Visit the North Pole</button>
      </div>
    </div>
  </div>

  <!-- Scene 3a -->
  <div class="screen" id="scene3a">
    <div class="game-screen">
      <div class="character">📡</div>
      <div class="story-box">
        <p class="story-text">OH NO! GPS goes wild! Farmers lose signals. Do you...</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('scene4a')">😅 Apologize & Learn</button>
        <button class="choice-btn yellow" onclick="goTo('scene4b')">⚡ Keep Blasting!</button>
      </div>
    </div>
  </div>

  <!-- Scene 3b -->
  <div class="screen" id="scene3b">
    <div class="game-screen">
      <div class="character">🌈</div>
      <div class="story-box">
        <p class="story-text">You create Northern Lights! People cheer. What next?</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('goodEnd')">💫 Dance More!</button>
        <button class="choice-btn yellow" onclick="goTo('dataScreen')">📊 See Real Data!</button>
      </div>
    </div>
  </div>

  <!-- Scene 4a -->
  <div class="screen" id="scene4a">
    <div class="game-screen">
      <div class="character">🤝</div>
      <div class="story-box">
        <p class="story-text">Scientists say: “It’s okay, Sunny! We study space weather to understand you.”</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('scienceEnd')">🔬 Help Scientists!</button>
      </div>
    </div>
  </div>

  <!-- Scene 4b -->
  <div class="screen" id="scene4b">
    <div class="game-screen">
      <div class="character">🌩️</div>
      <div class="story-box">
        <p class="story-text">You cause radio blackouts and power problems! Engineers work fast!</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('badEnd')">😬 Oops...</button>
      </div>
    </div>
  </div>

  <!-- Good Ending -->
  <div class="screen" id="goodEnd">
    <div class="game-screen">
      <div class="character">🌟</div>
      <div class="story-box">
        <p class="story-text">🎉 You brought beauty to Earth with your auroras!</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('dataScreen')">💡 Learn More</button>
      </div>
    </div>
  </div>

  <!-- Science Ending -->
  <div class="screen" id="scienceEnd">
    <div class="game-screen">
      <div class="character">🔬</div>
      <div class="story-box">
        <p class="story-text">🌍 Scientists track solar flares to protect our technology. Great teamwork!</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('dataScreen')">📊 View Real Data</button>
      </div>
    </div>
  </div>

  <!-- Bad Ending -->
  <div class="screen" id="badEnd">
    <div class="game-screen">
      <div class="character">😓</div>
      <div class="story-box">
        <p class="story-text">Too much energy caused chaos! Next time, balance power and care.</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('themeSelect')">🔄 Try Again</button>
      </div>
    </div>
  </div>

  <!-- Real Data Screen -->
  <div class="screen" id="dataScreen">
    <div class="game-screen">
      <div class="data-box" id="dataBox">Loading latest NASA space weather data...</div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('resources')">📚 Resources</button>
      </div>
    </div>
  </div>

  <!-- Resources Screen -->
  <div class="screen" id="resources">
    <div class="game-screen">
      <div class="resources-box">
        <h2>🌐 Data, Tools, and Resources</h2>
        <p><strong>APIs & Data:</strong></p>
        <ul>
          <li>NASA DONKI (Space Weather Database)</li>
          <li>NASA POWER Solar & Meteorological Data</li>
          <li>NOAA SWPC Space Weather Forecasts</li>
          <li>ESA & JAXA research on solar activity</li>
          <li>ISRO Space Weather Monitoring</li>
        </ul>
        <p><strong>Partners:</strong> NASA, ESA, ISRO, CSA, JAXA, MBRSC (UAE), UK Space Agency, South African National Space Agency, Argentinian & Brazilian Space Agencies, Turkish Space Agency, Spanish Space Agency.</p>
        <p><strong>Credits:</strong> Font (Fredoka), Icons (Emoji / Open Source), Story concept & code by your team for NASA Space Apps Challenge 2025.</p>
      </div>
      <div class="choices">
        <button class="choice-btn" onclick="goTo('themeSelect')">🏠 Back to Start</button>
      </div>
    </div>
  </div>

  <script>
    // Scene management
    function goTo(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function selectTheme(theme) {
      document.body.className = '';
      document.body.classList.add(`theme-${theme}`);
      goTo('home');
    }

    // Fetch NASA DONKI API data
    async function fetchNASAData() {
      const box = document.getElementById('dataBox');
      try {
        const res = await fetch('https://api.nasa.gov/DONKI/FLR?api_key=DEMO_KEY');
        const data = await res.json();
        if (data.length > 0) {
          const flare = data[0];
          box.innerHTML = `
            ☀️ <strong>Latest Solar Flare</strong><br>
            Class: ${flare.classType || 'N/A'}<br>
            Start Time: ${flare.beginTime}<br>
            Source Region: ${flare.sourceLocation || 'Unknown'}<br><br>
            NASA monitors solar activity through the DONKI database.`;
        } else {
          box.textContent = "No recent solar flares detected.";
        }
      } catch (err) {
        box.textContent = "Could not load NASA data.";
        console.error(err);
      }
    }

    // Auto-fetch when data screen is opened
    const observer = new MutationObserver(() => {
      const screen = document.getElementById('dataScreen');
      if (screen.classList.contains('active')) fetchNASAData();
    });
    observer.observe(document.body, { attributes: true, subtree: true, attributeFilter: ['class'] });
  </script>
</body>
</html>
